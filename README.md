# 臺北市運動場館地圖

基於 OpenStreetMap 的臺北市運動場館視覺化地圖應用，提供 426 個場館的互動式地圖查詢。

## 功能特色

### 已實現功能（MVP）

- [x] **互動式地圖**：使用 OpenStreetMap 底圖與 Leaflet.js
- [x] **智慧群聚**：使用 Marker Clustering 處理 426 個點位
- [x] **分類篩選**：
  - 健身房（353 筆）
  - 瑜珈教室（10 筆）
  - 游泳池（包含室內/室外/室內外，共 49 筆）
  - 撞球場及攀岩場（14 筆）
- [x] **搜尋功能**：支援場館名稱、地址、行政區搜尋
- [x] **定位服務**：
  - 「定位我」：使用瀏覽器定位
  - 「臺北車站」：快速定位備援
  - 半徑篩選（0.5 - 5 公里）
  - 依距離排序附近場館
- [x] **Hover 提示**：滑鼠移入顯示場館基本資訊
- [x] **詳情面板**：點擊顯示完整資訊
  - 名稱、類型、地址
  - 電話（市話、分機、行動電話）
  - 所屬單位、經營主體
  - Google Maps 導航連結
  - 一鍵撥號（行動裝置）
- [x] **自訂圖示**：不同場館類型顯示不同顏色與圖示
- [x] **資料清理**：自動修正異常經緯度（已修正 1 筆）

## 專案結構

```
sports_map/
├── index.html              # 主頁面
├── app.js                  # 應用程式邏輯
├── preprocess.py           # 資料預處理腳本
├── sports_20251201.csv     # 原始資料
├── sports_data.geojson     # 處理後的 GeoJSON 資料
├── PRD.txt                 # 產品需求文件
└── README.md               # 說明文件
```

## 快速開始

### 1. 資料預處理（已完成）

```bash
python preprocess.py
```

這個腳本會：
- 讀取 `sports_20251201.csv`
- 修正異常經緯度（臺北市經度應在 121.x）
- 標準化場館類型
- 生成 `sports_data.geojson`

### 2. 啟動應用

使用 Python 內建的 HTTP 伺服器：

```bash
python -m http.server 8000
```

或使用其他伺服器（Node.js, nginx 等）

### 3. 開啟瀏覽器

訪問：http://localhost:8000

## 使用方法

### 基本操作

1. **查看所有場館**：開啟應用後預設顯示所有 426 個場館
2. **篩選類型**：左側面板勾選想查看的場館類型
3. **搜尋場館**：上方搜尋框輸入關鍵字
4. **查看詳情**：
   - 滑鼠移到點位上：顯示簡要資訊
   - 點擊點位：開啟詳細資訊面板

### 進階功能

#### 找附近的瑜珈教室

1. 點擊左側「定位我」按鈕（或「臺北車站」）
2. 勾選「瑜珈教室」篩選器
3. 調整「附近範圍」滑桿（預設 2 公里）
4. 右側列表會顯示距離並排序

#### 搜尋特定場館

1. 在上方搜尋框輸入關鍵字（例如：「Curves」、「士林」）
2. 點擊搜尋結果
3. 地圖自動移動並顯示詳情

#### 導航到場館

1. 點擊場館開啟詳情面板
2. 點擊「在 Google Maps 開啟」
3. 使用 Google Maps 導航

## 技術架構

### 前端技術

- **地圖引擎**：Leaflet 1.9.4
- **群聚功能**：Leaflet.markercluster 1.5.3
- **圖示庫**：Font Awesome 6.4.0
- **底圖**：OpenStreetMap tiles
- **純前端**：無需後端，可部署為靜態網站

### 資料處理

- **語言**：Python 3
- **格式**：CSV → GeoJSON
- **資料量**：426 筆場館資料

### 資料品質

- 自動修正異常經緯度（已修正 1 筆：萬華某健身房從 21.5069 → 121.5069）
- 清理電話號碼格式（移除 .0 科學記號）
- 標準化場館類型分類

## 資料統計

### 場館類型分布

- 健身房：353 筆（82.9%）
- 室內游泳池：34 筆（8.0%）
- 撞球場及攀岩場：14 筆（3.3%）
- 瑜珈教室：10 筆（2.3%）
- 室外游泳池：8 筆（1.9%）
- 室內外游泳池：4 筆（0.9%）
- 游泳池：3 筆（0.7%）

### 行政區分布（前 5 名）

1. 大安區：82 筆
2. 中山區：65 筆
3. 松山區：46 筆
4. 內湖區：36 筆
5. 士林區：35 筆

## 瀏覽器支援

- Chrome/Edge（最新兩版）
- Safari（最新兩版）
- Firefox（最新兩版）
- 行動裝置瀏覽器

## 未來功能（V1.1）

依據 PRD 規劃的加分功能：

- [ ] 行政區邊界 overlay（視覺化分區）
- [ ] 熱度圖（heatmap）顯示健身房密集區
- [ ] 常用地點收藏（儲存「我家」和「公司」兩個地點）

## 部署

### GitHub Pages

1. 推送到 GitHub repository
2. 啟用 GitHub Pages
3. 選擇 main branch
4. 完成！

### 其他靜態主機

支援任何靜態網站託管服務：
- Vercel
- Netlify
- Render
- Zeabur
- Firebase Hosting

## 授權

資料來源：臺北市政府開放資料

## 作者

Generated by Claude Code

## 更新日誌

### 2026-02-02

- 初始版本發布
- 實現所有 MVP 功能
- 修正 1 筆異常經緯度資料
- 成功處理 426 筆場館資料
